<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern World - 2000s to Today Explorer</title>
    <style>
        :root {
            --primary: #6A1B9A;
            --accent: #00E676;
            --bg: #F3E5F5;
            --card-bg: #FFFFFF;
            --tech: #00BCD4;
            --future: #FF6F00;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #E1BEE7 0%, #CE93D8 50%, #BA68C8 100%);
            color: #333;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255,255,255,0.9);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 2.8rem;
            margin: 10px 0;
            background: linear-gradient(135deg, var(--primary), #9C27B0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.3rem;
            color: #666;
            font-style: italic;
        }

        /* Time Navigation */
        .time-navigator {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .time-button {
            background: white;
            border: 3px solid var(--primary);
            border-radius: 50px;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--primary);
            position: relative;
            overflow: hidden;
        }

        .time-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: var(--accent);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .time-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .time-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            border-color: var(--accent);
        }

        .time-button.active {
            background: linear-gradient(135deg, var(--primary), #9C27B0);
            color: white;
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(0,230,118,0.5);
        }

        .time-button span {
            position: relative;
            z-index: 1;
        }

        /* Exploration Area */
        .exploration-area {
            background: white;
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            min-height: 600px;
            position: relative;
            overflow: hidden;
        }

        .exploration-area::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(106,27,154,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        /* Discovery Cards */
        .discovery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
            position: relative;
            z-index: 1;
        }

        .discovery-card {
            background: linear-gradient(135deg, #FFFFFF, #F5F5F5);
            border: 3px solid var(--primary);
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .discovery-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0,230,118,0.2), transparent);
            transition: left 0.5s;
        }

        .discovery-card:hover::before {
            left: 100%;
        }

        .discovery-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 30px rgba(106,27,154,0.3);
            border-color: var(--accent);
        }

        .discovery-card.discovered {
            background: linear-gradient(135deg, #E8F5E9, #C8E6C9);
            border-color: var(--accent);
        }

        .discovery-card.discovered::after {
            content: '‚úì';
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 2rem;
            color: var(--accent);
            font-weight: bold;
        }

        .discovery-emoji {
            font-size: 4rem;
            margin-bottom: 15px;
            display: block;
            text-align: center;
        }

        .discovery-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
            text-align: center;
        }

        .discovery-description {
            font-size: 1rem;
            color: #666;
            line-height: 1.6;
            text-align: center;
            display: none;
        }

        .discovery-card.discovered .discovery-description {
            display: block;
        }

        /* Progress Tracker */
        .progress-section {
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .progress-badge {
            background: linear-gradient(135deg, var(--primary), #9C27B0);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .discoveries-count {
            background: var(--accent);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
        }

        /* Challenge Section */
        .challenge-section {
            background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
            border: 3px solid var(--future);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            display: none;
        }

        .challenge-section.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .challenge-title {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--future);
            margin-bottom: 20px;
            text-align: center;
        }

        .challenge-question {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 25px;
            text-align: center;
        }

        .challenge-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .challenge-option {
            background: white;
            border: 3px solid var(--future);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1rem;
            text-align: center;
            font-weight: 500;
        }

        .challenge-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
            border-color: var(--accent);
            background: #E8F5E9;
        }

        .challenge-option.selected {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .challenge-option.correct {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
            animation: celebrate 0.6s;
        }

        .challenge-option.wrong {
            background: #f44336;
            color: white;
            border-color: #f44336;
            animation: shake 0.5s;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        /* Feedback */
        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.1rem;
            display: none;
            line-height: 1.6;
            text-align: center;
        }

        .feedback.show {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .feedback.correct {
            background: #E8F5E9;
            border: 3px solid #4CAF50;
            color: #2E7D32;
        }

        .feedback.wrong {
            background: #FFEBEE;
            border: 3px solid #f44336;
            color: #c62828;
        }

        /* Completion Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal.show {
            display: flex;
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background: linear-gradient(135deg, white, #F5F5F5);
            padding: 50px;
            border-radius: 30px;
            max-width: 700px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            border: 5px solid var(--accent);
        }

        .modal-content h2 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary), #9C27B0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
        }

        .modal-content p {
            font-size: 1.3rem;
            line-height: 1.8;
            margin-bottom: 30px;
            color: #333;
        }

        .modal-emoji {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), #9C27B0);
            color: white;
            border: none;
            padding: 18px 40px;
            font-size: 1.3rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(106,27,154,0.4);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(106,27,154,0.6);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state-emoji {
            font-size: 6rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state-text {
            font-size: 1.5rem;
            font-style: italic;
        }

    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üì± Modern World Explorer üì±</h1>
            <p class="subtitle">Journey through the 2000s, 2010s, and 2020s - Discover how technology changed our world!</p>
        </header>

        <div class="progress-section">
            <div class="progress-info">
                <div class="progress-badge" id="current-period">Select a Period</div>
                <div class="discoveries-count">Discoveries: <span id="discoveries">0</span> / <span id="total-discoveries">0</span></div>
            </div>
        </div>

        <div class="time-navigator">
            <button class="time-button" data-period="2000s" onclick="explorePeriod('2000s', this)">
                <span>üìÖ The 2000s</span>
            </button>
            <button class="time-button" data-period="2010s" onclick="explorePeriod('2010s', this)">
                <span>üì± The 2010s</span>
            </button>
            <button class="time-button" data-period="2020s" onclick="explorePeriod('2020s', this)">
                <span>üöÄ The 2020s</span>
            </button>
        </div>

        <div class="exploration-area" id="exploration-area">
            <div class="empty-state">
                <div class="empty-state-emoji">üåê</div>
                <div class="empty-state-text">Click a time period above to begin your exploration!</div>
            </div>
        </div>

        <div class="challenge-section" id="challenge-section">
            <div class="challenge-title">üéØ Knowledge Challenge</div>
            <div id="challenge-content"></div>
        </div>
    </div>

    <div id="completion-modal" class="modal">
        <div class="modal-content">
            <div class="modal-emoji">üéâ</div>
            <h2>Exploration Complete!</h2>
            <p id="completion-message"></p>
            <button class="btn" onclick="closeModal()">Continue</button>
        </div>
    </div>

    <script>
        // Game Data - Exploration Style
        const periods = {
            '2000s': {
                name: 'The 2000s',
                discoveries: [
                    {
                        id: 'internet-growth',
                        emoji: 'üåê',
                        title: 'Internet Growth',
                        description: 'The Internet became much more common in homes and schools. By 2005, about 87% of teens in the US were using the Internet! Broadband (fast) Internet replaced slow dial-up, making streaming and online games possible.',
                        fact: 'Broadband Internet made it possible to watch videos and play games online!'
                    },
                    {
                        id: 'social-media-start',
                        emoji: 'üë•',
                        title: 'Social Media Begins',
                        description: 'Early social networking sites appeared! Friendster (2002) and MySpace (2003) let people create profiles and connect with friends online. Facebook was founded in 2004 by Mark Zuckerberg, starting at universities.',
                        fact: 'Facebook started at Harvard University in 2004!'
                    },
                    {
                        id: 'youtube',
                        emoji: 'üìπ',
                        title: 'YouTube Launches',
                        description: 'YouTube launched in 2005, changing how people share videos forever! People could now upload and watch videos from anywhere - tutorials, music, funny clips, and more.',
                        fact: 'YouTube was created so people could easily share videos online!'
                    },
                    {
                        id: 'millennium',
                        emoji: 'üéä',
                        title: 'New Millennium',
                        description: 'The year 2000 marked the start of a new millennium! People celebrated around the world. Technology was advancing rapidly, and the world was becoming more connected.',
                        fact: 'The year 2000 was a huge celebration worldwide!'
                    }
                ],
                challenges: [
                    {
                        question: 'What major video-sharing platform launched in 2005?',
                        options: ['Facebook', 'YouTube', 'Instagram', 'TikTok'],
                        correct: 1,
                        explanation: 'YouTube launched in 2005 and revolutionized how people share and watch videos online!'
                    },
                    {
                        question: 'When was Facebook founded?',
                        options: ['2002', '2003', '2004', '2005'],
                        correct: 2,
                        explanation: 'Facebook was founded in 2004 by Mark Zuckerberg, starting at Harvard University!'
                    }
                ]
            },
            '2010s': {
                name: 'The 2010s',
                discoveries: [
                    {
                        id: 'smartphones',
                        emoji: 'üì±',
                        title: 'Smartphones Everywhere',
                        description: 'Smartphones became common! The iPhone (2007) had already started the revolution, but by the 2010s, smartphones were everywhere. People could call, text, browse the Internet, take photos, and use apps - all from one device!',
                        fact: 'By 2015, over 2 billion people worldwide had smartphones!'
                    },
                    {
                        id: 'instagram',
                        emoji: 'üì∏',
                        title: 'Instagram & Visual Social Media',
                        description: 'Instagram launched in 2010, focusing on sharing photos! Snapchat (2011) introduced disappearing messages. Social media became more visual and mobile-friendly.',
                        fact: 'Instagram was all about sharing beautiful photos!'
                    },
                    {
                        id: 'apps',
                        emoji: 'üì≤',
                        title: 'App Revolution',
                        description: 'Mobile apps became huge! The App Store (2008) and Google Play (2012) made it easy to download games, tools, social media, maps, and more. Apps changed how people used their phones.',
                        fact: 'There are now millions of apps available for smartphones!'
                    },
                    {
                        id: 'connectivity',
                        emoji: 'üåç',
                        title: 'World Connected',
                        description: 'The world became more connected than ever! People could instantly communicate with anyone, anywhere. Social media grew rapidly, and technology was everywhere in daily life.',
                        fact: 'By 2019, over 3.5 billion people used social media!'
                    }
                ],
                challenges: [
                    {
                        question: 'When did Instagram launch?',
                        options: ['2008', '2009', '2010', '2011'],
                        correct: 2,
                        explanation: 'Instagram launched in 2010, focusing on photo sharing and visual content!'
                    },
                    {
                        question: 'What made smartphones so popular in the 2010s?',
                        options: ['They were cheap', 'They combined phone, Internet, camera, and apps in one device', 'They only made calls', 'They were big'],
                        correct: 1,
                        explanation: 'Smartphones combined everything - phone calls, Internet, camera, apps, and more - all in one portable device!'
                    }
                ]
            },
            '2020s': {
                name: 'The 2020s',
                discoveries: [
                    {
                        id: 'covid',
                        emoji: 'ü¶†',
                        title: 'COVID-19 Pandemic',
                        description: 'The COVID-19 pandemic (2020-2021) changed the world! Technology became even more important as people worked and learned from home. Video calls, online learning, and digital communication became essential.',
                        fact: 'The pandemic showed how important technology is for staying connected!'
                    },
                    {
                        id: 'ai',
                        emoji: 'ü§ñ',
                        title: 'Artificial Intelligence',
                        description: 'Artificial Intelligence (AI) became more advanced and accessible! AI helps with everything from search engines to voice assistants to creative tools. It\'s changing how we work and learn.',
                        fact: 'AI is now used in many everyday technologies!'
                    },
                    {
                        id: 'tiktok',
                        emoji: 'üéµ',
                        title: 'TikTok & Short Videos',
                        description: 'TikTok (launched 2016, popular in 2020s) became huge for short, fun videos! Social media continued to evolve with new platforms and ways to share content.',
                        fact: 'TikTok made short video content extremely popular!'
                    },
                    {
                        id: 'climate',
                        emoji: 'üå±',
                        title: 'Climate Change Awareness',
                        description: 'Awareness of climate change grew! People used technology to learn about and address environmental issues. Social movements spread quickly through social media.',
                        fact: 'Technology helps people learn about and fight climate change!'
                    },
                    {
                        id: 'making-history',
                        emoji: 'üìñ',
                        title: 'We\'re Making History',
                        description: 'We\'re living in history right now! Our actions matter, and we\'re part of the story. Technology continues to evolve rapidly, and we\'re shaping the future with every choice we make.',
                        fact: 'You are part of history being made right now!'
                    }
                ],
                challenges: [
                    {
                        question: 'How did the COVID-19 pandemic change technology use?',
                        options: ['People stopped using technology', 'Technology became essential for work, learning, and staying connected from home', 'Nothing changed', 'Technology disappeared'],
                        correct: 1,
                        explanation: 'The pandemic made technology essential! People worked, learned, and stayed connected through video calls and online platforms!'
                    },
                    {
                        question: 'What is Artificial Intelligence (AI)?',
                        options: ['A type of robot', 'Computer systems that can learn and make decisions, now used in many everyday technologies', 'A social media app', 'A type of phone'],
                        correct: 1,
                        explanation: 'AI is computer systems that can learn and make decisions! It\'s now used in search engines, voice assistants, and many other technologies!'
                    }
                ]
            }
        };

        // Game State
        let currentPeriod = null;
        let discoveredItems = new Set();
        let completedChallenges = new Set();
        let score = 0;
        let totalChallenges = 0;
        let correctChallenges = 0;

        function explorePeriod(periodKey, buttonElement) {
            currentPeriod = periodKey;
            const period = periods[periodKey];
            
            // Update UI
            document.querySelectorAll('.time-button').forEach(btn => btn.classList.remove('active'));
            if (buttonElement) {
                buttonElement.classList.add('active');
            } else {
                document.querySelector(`[data-period="${periodKey}"]`).classList.add('active');
            }
            
            document.getElementById('current-period').textContent = period.name;
            document.getElementById('total-discoveries').textContent = period.discoveries.length;
            
            // Display discoveries
            const explorationArea = document.getElementById('exploration-area');
            explorationArea.innerHTML = '';
            
            const grid = document.createElement('div');
            grid.className = 'discovery-grid';
            
            period.discoveries.forEach(discovery => {
                const card = document.createElement('div');
                card.className = 'discovery-card';
                card.dataset.id = discovery.id;
                
                const isDiscovered = discoveredItems.has(`${periodKey}-${discovery.id}`);
                if (isDiscovered) {
                    card.classList.add('discovered');
                }
                
                card.innerHTML = `
                    <div class="discovery-emoji">${discovery.emoji}</div>
                    <div class="discovery-title">${discovery.title}</div>
                    <div class="discovery-description">
                        <p>${discovery.description}</p>
                        <p style="margin-top: 10px; font-weight: bold; color: var(--accent);">üí° ${discovery.fact}</p>
                    </div>
                `;
                
                card.onclick = () => discoverItem(periodKey, discovery.id, card);
                grid.appendChild(card);
            });
            
            explorationArea.appendChild(grid);
            updateDiscoveriesCount();
            
            // Check if all items discovered for this period
            const periodDiscovered = period.discoveries.every(d => 
                discoveredItems.has(`${periodKey}-${d.id}`)
            );
            if (periodDiscovered && !completedChallenges.has(periodKey)) {
                setTimeout(() => showChallenge(periodKey), 1000);
            }
        }

        function discoverItem(periodKey, itemId, cardElement) {
            const key = `${periodKey}-${itemId}`;
            if (!discoveredItems.has(key)) {
                discoveredItems.add(key);
                cardElement.classList.add('discovered');
                updateDiscoveriesCount();
                
                // Send TTS
                const period = periods[periodKey];
                const discovery = period.discoveries.find(d => d.id === itemId);
                if (window.parent && window.parent !== window) {
                    window.parent.postMessage({
                        type: 'html-game-tts',
                        text: `${discovery.title}. ${discovery.description}`,
                        rate: 0.9,
                        pitch: 1.0
                    }, '*');
                }
                
                // Check if all discovered for this period
                const allDiscovered = period.discoveries.every(d => 
                    discoveredItems.has(`${periodKey}-${d.id}`)
                );
                if (allDiscovered && !completedChallenges.has(periodKey)) {
                    setTimeout(() => showChallenge(periodKey), 1500);
                }
            }
        }

        function updateDiscoveriesCount() {
            if (!currentPeriod) return;
            const period = periods[currentPeriod];
            const count = period.discoveries.filter(d => 
                discoveredItems.has(`${currentPeriod}-${d.id}`)
            ).length;
            document.getElementById('discoveries').textContent = count;
        }

        function showChallenge(periodKey) {
            const period = periods[periodKey];
            const challenge = period.challenges[Math.floor(Math.random() * period.challenges.length)];
            
            const challengeSection = document.getElementById('challenge-section');
            challengeSection.classList.add('active');
            
            const content = document.getElementById('challenge-content');
            content.innerHTML = `
                <div class="challenge-question">${challenge.question}</div>
                <div class="challenge-options">
                    ${challenge.options.map((option, index) => `
                        <div class="challenge-option" onclick="selectChallengeOption(${index}, ${challenge.correct}, '${challenge.explanation.replace(/'/g, "\\'")}', '${periodKey}')">
                            ${option}
                        </div>
                    `).join('')}
                </div>
                <div id="challenge-feedback" class="feedback"></div>
            `;
            
            challengeSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function selectChallengeOption(selectedIndex, correctIndex, explanation, periodKey) {
            const options = document.querySelectorAll('.challenge-option');
            const feedback = document.getElementById('challenge-feedback');
            
            options.forEach(opt => opt.onclick = null);
            
            if (selectedIndex === correctIndex) {
                options[selectedIndex].classList.add('correct');
                feedback.textContent = '‚úì Excellent! ' + explanation;
                feedback.className = 'feedback show correct';
                score += 30;
                correctChallenges++;
            } else {
                options[selectedIndex].classList.add('wrong');
                options[correctIndex].classList.add('correct');
                feedback.textContent = 'Not quite. ' + explanation;
                feedback.className = 'feedback show wrong';
            }
            
            totalChallenges++;
            completedChallenges.add(periodKey);
            
            // Send TTS
            if (window.parent && window.parent !== window) {
                window.parent.postMessage({
                    type: 'html-game-tts',
                    text: feedback.textContent,
                    rate: 0.9,
                    pitch: 1.0
                }, '*');
            }
            
            // Check if all periods completed
            setTimeout(() => {
                if (Object.keys(periods).every(key => completedChallenges.has(key))) {
                    endGame();
                } else {
                    // Hide challenge, show next period hint
                    document.getElementById('challenge-section').classList.remove('active');
                }
            }, 3000);
        }

        function endGame() {
            const percentage = Math.round((correctChallenges / totalChallenges) * 100);
            let message = '';
            
            if (percentage >= 90) {
                message = `Outstanding exploration! You discovered all the key moments and scored ${score} points with ${percentage}% correct! You truly understand how technology has transformed our modern world! üèÜ`;
            } else if (percentage >= 75) {
                message = `Excellent work! You explored the modern world and scored ${score} points with ${percentage}% correct! You have a strong understanding of how technology changed everything! üåü`;
            } else if (percentage >= 60) {
                message = `Good exploration! You scored ${score} points with ${percentage}% correct! Keep learning about how technology continues to shape our world! üìö`;
            } else {
                message = `You scored ${score} points with ${percentage}% correct. Review what you discovered and try again! Technology is changing our world every day! üí™`;
            }
            
            document.getElementById('completion-message').textContent = message;
            document.getElementById('completion-modal').classList.add('show');
            
            // Send completion message
            if (window.parent && window.parent !== window) {
                window.parent.postMessage({
                    type: 'html-game-tts',
                    text: message,
                    rate: 0.9,
                    pitch: 1.0
                }, '*');
                
                setTimeout(() => {
                    window.parent.postMessage({
                        type: 'html-game-complete',
                        game: 'modern-world-2000s-today'
                    }, '*');
                }, 3000);
            }
        }

        function closeModal() {
            document.getElementById('completion-modal').classList.remove('show');
        }
    </script>
</body>
</html>
